
@{
    ViewData["Title"] = "Historie";
    Layout = "_AdminLayout";
}
    <script src="~/lib/jquery/dist/jquery.js"></script>
@model List<Sopro.Interfaces.ControllerHistory.IEvaluation>
<h1 class="display-4 mb-5 pt-5">Historie</h1>
@if (Model.Count > 0)
{<h3 class="mb-2">Szenarien</h3>}
else
{
    <div class="text-center">
        <p>Es wurden noch keine Szenarien ausgeführt.</p>

    </div>
}
<div class="flex-column ">
    @foreach (Sopro.Models.History.Evaluation e in Model)
    {
        <div>
            <div class="d-flex rounded shadow mt-3 py-2 px-2">

                <h5 class="ml-2 mt-1 mr-5"> Szenario </h5>

                <img src="~/bootstrap-icons/geo-alt.svg" width="23" class="ml-2" />
                <div class="ml-2 mt-1">@e.scenario.location.name</div>
                <div class="ml-4 mt-1">Stoßzeiten: @e.scenario.rushhours.Count</div>
                <div class="mr-auto ml-4 mt-1">Buchungen pro Tag: @e.scenario.bookingCountPerDay</div>
                <a asp-controller="Simulation" asp-action="Evaluation">
                    <img src="~/bootstrap-icons/caret-right-fill.svg" width="23" class="filter-green mr-2 mt-1" />
                </a>
                <img src="~/bootstrap-icons/caret-down-fill.svg" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne" width="23" class="mr-2 ml-2 filter-blue" />
            </div>
            <div id="collapseOne" class="collapse ml-4" aria-labelledby="headingOne">
                <div class="flex-column rounded border p-3">
                    <div class="d-flex mb-2">
                        <div class="mr-5 mt-2 ml-2"> <b>@e.scenario.location.name</b></div>
                        <div class="flex-column  mt-2">
                            @foreach (Sopro.Models.Infrastructure.Zone zone in e.scenario.location.zones)
                            {
                                <div class="d-flex">
                                    <div class="mr-2">Ladezone @zone.site</div>
                                    <div class="mr-2">Ladestationen: @zone.stations.Count</div>
                                </div>
                            }
                        </div>
                    </div>
                    @foreach (Sopro.Models.Simulation.Rushhour rh in e.scenario.rushhours)
                    {
                        <div class="d-flex pl-2">
                            <div class="mr-5"><b>Stoßzeit @(e.scenario.rushhours.IndexOf(rh)+1) </b></div>
                            <div class="ml-4">@rh.start.ToLocalTime()</div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>
<div class="d-flex mt-4 float-right">
    <div class="ml-3">
        <form asp-controller="Simulation" asp-action="Import" id="upload" class="form-horizontal" method="post" enctype="multipart/form-data">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="customFile">
                <label class="custom-file-label" for="customFile">Choose file</label>
            </div>


        </form>
    </div>
    <div class="ml-3">
        <button form="upload" type="submit" class="btn btn-primary btn-mhp">Import</button>
    </div>
    <div class="ml-3">
        <a asp-controller="Simulation" asp-action="Export" class="btn btn-secondary" type="button" name="export">Export </a>
    </div>
</div>
<script type="text/javascript">
    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>


